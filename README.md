# Speech Training Application - System Architecture Pipeline

## Complete User Flow Diagram
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER INTERFACE (React)                          â”‚
â”‚                         Hosted on Vercel                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ User visits app
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUTHENTICATION LAYER                                â”‚
â”‚                         Supabase Auth                                    â”‚
â”‚  â€¢ Login/Register                                                        â”‚
â”‚  â€¢ JWT token management                                                  â”‚
â”‚  â€¢ Session handling                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Authenticated
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRACTICE SESSION START                           â”‚
â”‚                                                                          â”‚
â”‚  Frontend displays:                                                      â”‚
â”‚  â€¢ Target sentence: "Think about the weather"                           â”‚
â”‚  â€¢ [Optional] Play TTS example (ElevenLabs)                             â”‚
â”‚  â€¢ Record button                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ User clicks "Record"
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUDIO CAPTURE (Frontend)                            â”‚
â”‚                                                                          â”‚
â”‚  Web Audio API + MediaRecorder API                                      â”‚
â”‚  â€¢ Start recording from microphone                                       â”‚
â”‚  â€¢ Real-time waveform visualization (WaveSurfer.js)                     â”‚
â”‚  â€¢ User speaks: "Fink about the wedder"                                 â”‚
â”‚  â€¢ Stop recording                                                        â”‚
â”‚  â€¢ Convert to WAV/MP3 format                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ POST /api/v1/practice/submit-audio
                                 â”‚ Payload: { audio: File, reference_text: "..." }
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND API (FastAPI)                               â”‚
â”‚                     Hosted on Railway                                    â”‚
â”‚                                                                          â”‚
â”‚  1. Validate request (auth token, file size, format)                    â”‚
â”‚  2. Upload audio to storage                                             â”‚
â”‚  3. Initialize session tracking                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Audio file ready
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUDIO PREPROCESSING LAYER                             â”‚
â”‚                                                                          â”‚
â”‚  Python libraries: pydub, soundfile                                     â”‚
â”‚  â€¢ Normalize audio volume                                               â”‚
â”‚  â€¢ Remove leading/trailing silence                                      â”‚
â”‚  â€¢ Resample to 16kHz (standard for speech)                              â”‚
â”‚  â€¢ Convert to required format                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Preprocessed audio
                                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                              â”‚
          â–¼                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WHISPER API (OpenAI)   â”‚              â”‚  AZURE SPEECH SERVICES       â”‚
â”‚                          â”‚              â”‚  Pronunciation Assessment    â”‚
â”‚  â€¢ Transcription         â”‚              â”‚                              â”‚
â”‚  â€¢ Word-level timestamps â”‚              â”‚  Input:                      â”‚
â”‚  â€¢ Confidence scores     â”‚              â”‚  â€¢ Audio file                â”‚
â”‚                          â”‚              â”‚  â€¢ Reference text:           â”‚
â”‚  Returns:                â”‚              â”‚    "Think about the weather" â”‚
â”‚  "Fink about the wedder" â”‚              â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  Returns:                    â”‚
             â”‚                            â”‚  â€¢ Overall accuracy: 68/100  â”‚
             â”‚                            â”‚  â€¢ Phoneme-level scores:     â”‚
             â”‚                            â”‚    - Î¸ â†’ f (score: 31)       â”‚
             â”‚                            â”‚    - Ã° â†’ d (score: 38)       â”‚
             â”‚                            â”‚  â€¢ Word-level breakdown      â”‚
             â”‚                            â”‚  â€¢ Error types               â”‚
             â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                           â”‚
             â”‚                                           â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Both results combined
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR ANALYSIS ENGINE (Backend)                       â”‚
â”‚                         Python + Business Logic                          â”‚
â”‚                                                                          â”‚
â”‚  1. Compare Whisper transcription vs reference text                     â”‚
â”‚  2. Parse Azure phoneme scores                                          â”‚
â”‚  3. Identify error patterns:                                            â”‚
â”‚     â€¢ Phoneme substitutions (Î¸â†’f, Ã°â†’d)                                  â”‚
â”‚     â€¢ Omissions                                                          â”‚
â”‚     â€¢ Timing/duration issues                                             â”‚
â”‚     â€¢ Prosody problems                                                   â”‚
â”‚                                                                          â”‚
â”‚  4. Query user history from database:                                   â”‚
â”‚     â€¢ Past phoneme performance                                           â”‚
â”‚     â€¢ Improvement trends                                                 â”‚
â”‚     â€¢ Recurring error patterns                                           â”‚
â”‚                                                                          â”‚
â”‚  5. Classify impediment type:                                            â”‚
â”‚     â€¢ Frontal lisp (Î¸â†’f, Ã°â†’d pattern)                                   â”‚
â”‚     â€¢ Rhotacism (râ†’w)                                                    â”‚
â”‚     â€¢ Etc.                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Structured error report
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE UPDATE (Supabase)                            â”‚
â”‚                          PostgreSQL                                      â”‚
â”‚                                                                          â”‚
â”‚  INSERT INTO phoneme_performance:                                       â”‚
â”‚  â€¢ user_id, session_id, timestamp                                       â”‚
â”‚  â€¢ phoneme, accuracy_score, error_type                                  â”‚
â”‚  â€¢ word, position                                                        â”‚
â”‚                                                                          â”‚
â”‚  UPDATE user_progress:                                                  â”‚
â”‚  â€¢ sessions_completed++                                                  â”‚
â”‚  â€¢ overall_score_trend                                                   â”‚
â”‚  â€¢ current_difficulty_level                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Data saved
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI FEEDBACK GENERATION (Claude API)                     â”‚
â”‚                      Anthropic Claude Sonnet 4                           â”‚
â”‚                                                                          â”‚
â”‚  Input payload:                                                          â”‚
â”‚  {                                                                       â”‚
â”‚    "target_sentence": "Think about the weather",                        â”‚
â”‚    "user_transcription": "Fink about the wedder",                       â”‚
â”‚    "phoneme_errors": [                                                   â”‚
â”‚      {"phoneme": "Î¸", "actual": "f", "score": 31, "word": "think"},    â”‚
â”‚      {"phoneme": "Ã°", "actual": "d", "score": 38, "word": "the"}       â”‚
â”‚    ],                                                                    â”‚
â”‚    "historical_patterns": {                                              â”‚
â”‚      "Î¸_substitution_rate": 0.87,                                       â”‚
â”‚      "sessions_completed": 12,                                           â”‚
â”‚      "improvement_trend": "slight"                                       â”‚
â”‚    },                                                                    â”‚
â”‚    "user_difficulty_level": 2                                            â”‚
â”‚  }                                                                       â”‚
â”‚                                                                          â”‚
â”‚  Claude analyzes and generates:                                         â”‚
â”‚  â€¢ Personalized, encouraging feedback                                    â”‚
â”‚  â€¢ 5 adaptive practice sentences (progressive difficulty)               â”‚
â”‚  â€¢ Specific articulation tips                                            â”‚
â”‚  â€¢ Difficulty adjustment recommendation                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Claude response received
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TEXT-TO-SPEECH GENERATION (ElevenLabs)                      â”‚
â”‚                          Optional Step                                   â”‚
â”‚                                                                          â”‚
â”‚  If user needs to hear correct pronunciation:                           â”‚
â”‚  â€¢ Generate TTS for problem words: "think", "the", "weather"           â”‚
â”‚  â€¢ Generate TTS for next practice sentences                             â”‚
â”‚  â€¢ Use appropriate accent (en-US, en-GB, etc.)                          â”‚
â”‚  â€¢ Store audio URLs                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ TTS audio ready
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESPONSE ASSEMBLY (Backend)                           â”‚
â”‚                                                                          â”‚
â”‚  Compile complete response:                                             â”‚
â”‚  {                                                                       â”‚
â”‚    "session_id": "uuid",                                                â”‚
â”‚    "overall_score": 68,                                                 â”‚
â”‚    "accuracy_breakdown": {                                              â”‚
â”‚      "pronunciation": 65,                                               â”‚
â”‚      "fluency": 82,                                                     â”‚
â”‚      "completeness": 100                                                â”‚
â”‚    },                                                                    â”‚
â”‚    "errors": [                                                           â”‚
â”‚      {                                                                   â”‚
â”‚        "phoneme": "Î¸",                                                  â”‚
â”‚        "word": "think",                                                  â”‚
â”‚        "score": 31,                                                      â”‚
â”‚        "feedback": "Try placing tongue between teeth"                   â”‚
â”‚      }                                                                   â”‚
â”‚    ],                                                                    â”‚
â”‚    "ai_feedback": {                                                      â”‚
â”‚      "text": "Good effort! I noticed you're substituting...",          â”‚
â”‚      "encouragement": "You're making progress on fluency!"              â”‚
â”‚    },                                                                    â”‚
â”‚    "practice_sentences": [                                               â”‚
â”‚      "The cat is here.",                                                â”‚
â”‚      "I think that's right.",                                           â”‚
â”‚      "This thing is smooth.",                                           â”‚
â”‚      "Three brothers thought about it.",                                â”‚
â”‚      "The weather is thoroughly unpredictable."                         â”‚
â”‚    ],                                                                    â”‚
â”‚    "tts_urls": {                                                         â”‚
â”‚      "correct_example": "https://storage.../correct.mp3",              â”‚
â”‚      "practice_1": "https://storage.../p1.mp3",                        â”‚
â”‚    },                                                                    â”‚
â”‚    "visual_data": {                                                      â”‚
â”‚      "phoneme_chart": [...],                                            â”‚
â”‚      "waveform_data": [...],                                            â”‚
â”‚      "progress_history": [...]                                          â”‚
â”‚    }                                                                     â”‚
â”‚  }                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Return response to frontend
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND RESULTS DISPLAY                              â”‚
â”‚                                                                          â”‚
â”‚  User sees:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Your Score: 68/100                                       â”‚         â”‚
â”‚  â”‚  â­â­â­â˜†â˜†                                                  â”‚         â”‚
â”‚  â”‚                                                            â”‚         â”‚
â”‚  â”‚  Great effort! I noticed you're substituting 'th'         â”‚         â”‚
â”‚  â”‚  sounds with 'f' and 'd'. This is very common and         â”‚         â”‚
â”‚  â”‚  completely fixable with practice.                        â”‚         â”‚
â”‚  â”‚                                                            â”‚         â”‚
â”‚  â”‚  Problem Areas:                                            â”‚         â”‚
â”‚  â”‚  ğŸ”´ "think" - Î¸ sound (31/100)                            â”‚         â”‚
â”‚  â”‚     [Play Correct] [Play Your Recording]                  â”‚         â”‚
â”‚  â”‚                                                            â”‚         â”‚
â”‚  â”‚  ğŸ’¡ Tip: Place your tongue between your teeth and         â”‚         â”‚
â”‚  â”‚  blow air gently...                                        â”‚         â”‚
â”‚  â”‚                                                            â”‚         â”‚
â”‚  â”‚  ğŸ“Š Progress Chart [Recharts visualization]               â”‚         â”‚
â”‚  â”‚                                                            â”‚         â”‚
â”‚  â”‚  Next Practice Sentences:                                 â”‚         â”‚
â”‚  â”‚  1. "The cat is here." [â–¶ï¸ Listen] [ğŸ¤ Record]           â”‚         â”‚
â”‚  â”‚  2. "I think that's right." [â–¶ï¸ Listen] [ğŸ¤ Record]      â”‚         â”‚
â”‚  â”‚  ...                                                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ User continues practice
                                 â–¼
                          [Loop back to top]
```

---

## Data Flow Diagram
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Speaks into microphone
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Audio API      â”‚
â”‚   (Browser)          â”‚
â”‚   â€¢ Capture audio    â”‚
â”‚   â€¢ Real-time visual â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Audio blob (WAV/MP3)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React Frontend     â”‚
â”‚   â€¢ FormData prep    â”‚
â”‚   â€¢ Loading states   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. HTTP POST with audio file + metadata
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FastAPI Backend (Railway)                   â”‚
â”‚                                                           â”‚
â”‚  Rate Limiting â†’ Auth Check â†’ File Validation            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Save audio to storage
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Storage    â”‚
â”‚  â€¢ Store audio file  â”‚
â”‚  â€¢ Generate URL      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Audio URL
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Parallel API Calls                  â”‚
â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Whisper   â”‚      â”‚   Azure     â”‚   â”‚
â”‚  â”‚   (STT)     â”‚      â”‚   (Assess)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                    â”‚           â”‚
â”‚         â”‚                    â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚
          â”‚ 6. Transcription   â”‚ 7. Phoneme scores
          â”‚                    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Error Analysis â”‚
          â”‚ (Python Logic) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 8. Error patterns identified
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   PostgreSQL   â”‚
          â”‚   (Supabase)   â”‚
          â”‚ â€¢ Save results â”‚
          â”‚ â€¢ Get history  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 9. Historical data + current errors
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Claude API   â”‚
          â”‚ â€¢ Generate     â”‚
          â”‚   feedback     â”‚
          â”‚ â€¢ Create       â”‚
          â”‚   sentences    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 10. Personalized response
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  ElevenLabs    â”‚
          â”‚  (Optional)    â”‚
          â”‚ â€¢ TTS for      â”‚
          â”‚   examples     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 11. Audio URLs
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  JSON Response â”‚
          â”‚  Assembly      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 12. Complete response object
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ React Frontend â”‚
          â”‚ â€¢ Display UI   â”‚
          â”‚ â€¢ Update state â”‚
          â”‚ â€¢ Show results â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Storage & Database Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SUPABASE (All-in-One)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   PostgreSQL DB      â”‚  â”‚   Storage Buckets   â”‚    â”‚
â”‚  â”‚                      â”‚  â”‚                     â”‚    â”‚
â”‚  â”‚  Tables:             â”‚  â”‚  Buckets:           â”‚    â”‚
â”‚  â”‚  â€¢ users             â”‚  â”‚  â€¢ audio-uploads/   â”‚    â”‚
â”‚  â”‚  â€¢ sessions          â”‚  â”‚  â€¢ tts-generated/   â”‚    â”‚
â”‚  â”‚  â€¢ phoneme_performanceâ”‚ â”‚                     â”‚    â”‚
â”‚  â”‚  â€¢ practice_sentencesâ”‚  â”‚  Auto-delete after  â”‚    â”‚
â”‚  â”‚  â€¢ user_progress     â”‚  â”‚  30 days (GDPR)     â”‚    â”‚
â”‚  â”‚  â€¢ impediment_profilesâ”‚ â”‚                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚             â”‚                        â”‚                 â”‚
â”‚             â–¼                        â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        Supabase Realtime (Optional)          â”‚    â”‚
â”‚  â”‚  â€¢ Live progress updates                     â”‚    â”‚
â”‚  â”‚  â€¢ Multi-device sync                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Supabase Auth                      â”‚    â”‚
â”‚  â”‚  â€¢ JWT tokens                                 â”‚    â”‚
â”‚  â”‚  â€¢ Row-level security                         â”‚    â”‚
â”‚  â”‚  â€¢ OAuth providers                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Complete Technology Stack Mapping
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PRESENTATION LAYER                        â”‚
â”‚  React + TypeScript + Tailwind + shadcn/ui                   â”‚
â”‚  Hosted on: Vercel                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ HTTPS/WebSocket
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APPLICATION LAYER                         â”‚
â”‚  FastAPI (Python 3.11+)                                      â”‚
â”‚  Hosted on: Railway/Render                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Layer   â”‚  â”‚  Data Layer  â”‚  â”‚ Storage Layerâ”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ â€¢ Whisper    â”‚  â”‚ â€¢ PostgreSQL â”‚  â”‚ â€¢ Supabase   â”‚
â”‚ â€¢ Azure      â”‚  â”‚ â€¢ Redis      â”‚  â”‚   Storage    â”‚
â”‚ â€¢ Claude     â”‚  â”‚   (cache)    â”‚  â”‚ â€¢ Cloudflare â”‚
â”‚ â€¢ ElevenLabs â”‚  â”‚ â€¢ Supabase   â”‚  â”‚   R2         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```